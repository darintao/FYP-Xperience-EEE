{"version":3,"sources":["../../src/pages/game/util/map/map.module.ts","../../src/pages/game/util/map/map.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MapPage } from './map';\n\n@NgModule({\n  declarations: [\n    MapPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MapPage),\n  ],\n})\nexport class MapPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/util/map/map.module.ts","import {Component, ElementRef, ViewChild} from '@angular/core';\nimport {IonicPage, NavController, NavParams} from 'ionic-angular';\nimport {\n  GoogleMaps,\n  GoogleMap,\n  GoogleMapsEvent,\n  GoogleMapOptions,\n  MarkerOptions,\n  Marker, LatLng, CameraPosition, ILatLng\n} from '@ionic-native/google-maps';\nimport {Geolocation} from '@ionic-native/geolocation';\nimport {ToastProvider} from '../../../../providers/utility/toast/toast';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-map',\n  templateUrl: 'map.html',\n})\nexport class MapPage {\n  map: GoogleMap;\n  @ViewChild('map') mapElement: ElementRef;\n  private selfmarker: Marker;\n\n  constructor(private toastProvider: ToastProvider, private geoLocation: Geolocation, public navCtrl: NavController, public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n    this.loadMap();\n  }\n\n  loadMap() {\n    let mapOptions: GoogleMapOptions = {\n      camera: {\n        target: {\n          lat: 1.347679,\n          lng: 103.681268\n        },\n        zoom: 12,\n        tilt: 30\n      }\n    };\n    let markerIcon = {\n      'url': 'https://firebasestorage.googleapis.com/v0/b/fyp03-136e5.appspot.com/o/Doge.png?alt=media&token=e0ff153d-f580-414c-b45c-9e07307705c7',\n      'size': {\n        width: 35,\n        height: 30,\n      }\n    }\n\n    this.map = GoogleMaps.create(this.mapElement.nativeElement, mapOptions);\n    this.map.one(GoogleMapsEvent.MAP_READY).then(\n      () => {\n        this.geoLocation.getCurrentPosition().then((resp) => {\n          if (resp.coords != undefined && resp.coords != null) {\n            let cameraPos: CameraPosition<ILatLng> = {\n              target: new LatLng(resp.coords.latitude, resp.coords.longitude),\n              zoom: 18,\n            }\n            this.map.moveCamera(cameraPos);\n          }\n          else {\n            this.toastProvider.showToast(\"You need to enable location manually :)\");\n          }\n        });\n        var firstMarkerFlag = true;\n        const subscription = this.geoLocation.watchPosition()\n          .subscribe(position => {\n            if (position.coords != undefined && position.coords != null) {\n              let userPosition: LatLng = new LatLng(position.coords.latitude, position.coords.longitude);\n              if (this.selfmarker != null) {\n                this.selfmarker.setPosition(userPosition);\n                if (firstMarkerFlag) {\n                  // this.map.addMarker(this.selfmarker).then((res) => {\n                  //   firstMarkerFlag = false\n                  // }).catch((err) => {\n                  //   firstMarkerFlag = false\n                  // });\n                }\n                else{\n                  //original code\n                  // this.map.addMarker(this.selfmarker);\n                }\n                firstMarkerFlag = false\n              } else {\n                if (firstMarkerFlag) {\n                  let markerOptions: MarkerOptions = {\n                    position: userPosition,\n                    icon: markerIcon,\n                    animation: 'DROP'\n                  };\n                  this.map.addMarker(markerOptions).then((marker) => {\n                    this.selfmarker = marker;\n                    firstMarkerFlag = false\n                  }).catch((err) => {\n                    firstMarkerFlag = false;\n                  })\n                }\n                firstMarkerFlag = false\n\n              }\n            }\n          });\n      }\n    );\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/util/map/map.ts"],"sourceRoot":""}